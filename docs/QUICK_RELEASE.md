# 快速发布指南

## 🚀 3 分钟自动化发布新版本

### 1. 升级版本号

```bash
# 选择合适的版本类型
pnpm bump:patch    # 修复 bug (0.1.0 -> 0.1.1)
pnpm bump:minor    # 新功能 (0.1.0 -> 0.2.0)
pnpm bump:major    # 重大更改 (0.1.0 -> 1.0.0)
```

### 2. 更新变更日志

编辑 `CHANGELOG.md`，在对应版本下添加变更内容：

```markdown
## [0.1.2] - 2025-07-08

### 新增
- 添加了新的插件管理功能

### 修复
- 修复了插件加载时的内存泄漏问题
- 解决了暗黑模式下的显示异常

### 改进
- 优化了应用启动速度
- 改进了错误提示信息
```

### 3. 一键发布

```bash
pnpm release
```

这个命令会自动：
- ✅ 检查 Git 状态
- ✅ 运行测试
- ✅ 同步版本号到所有文件
- ✅ 提交版本变更
- ✅ 推送到 GitHub

### 4. 自动化构建和发布

GitHub Actions 会自动检测版本变更并：
- 🏷️ 创建 Git 标签 (如 `v0.1.2`)
- 🔨 并行构建多平台应用包
- 📦 创建 GitHub Release
- ⬆️ 上传所有构建产物

## 📋 发布检查清单

发布前确保：

- [ ] 功能已完成并测试
- [ ] 代码已合并到主分支 (main/master)
- [ ] 所有测试通过 (`pnpm test`)
- [ ] 文档已更新
- [ ] 变更日志已编写
- [ ] 版本号符合语义化版本规范

## 🤖 自动化优势

相比手动发布，新的自动化流程具有以下优势：

### ⚡ 更快速
- 无需手动创建标签
- 并行构建多个平台
- 自动上传和发布

### 🛡️ 更安全
- 自动检测版本变更
- 避免重复发布
- 统一的构建环境

### 📊 更可靠
- 完整的构建日志
- 一致的发布流程
- 自动错误检测

## 🎯 版本选择指南

| 变更类型 | 版本类型 | 示例 |
|----------|----------|------|
| Bug 修复 | patch | 0.1.0 → 0.1.1 |
| 新功能 | minor | 0.1.0 → 0.2.0 |
| 破坏性更改 | major | 0.1.0 → 1.0.0 |
| 测试版本 | prerelease | 0.1.0 → 0.1.0-beta.1 |

## 🔧 常用命令

```bash
# 查看当前版本
node -p "require('./package.json').version"

# 同步版本到所有文件
pnpm sync:version

# 检查图标状态
pnpm check:icons

# 本地构建测试
pnpm build

# 查看发布历史
git tag -l | sort -V
```

## 🚨 紧急修复发布

如需紧急发布修复：

```bash
# 1. 快速修复
git checkout -b hotfix/urgent-fix
# 修复代码...

# 2. 升级补丁版本
pnpm bump:patch

# 3. 快速发布
pnpm release

# 4. 合并回主分支
git checkout main
git merge hotfix/urgent-fix
```

## 📊 发布后检查

发布完成后：

1. **验证 Release**: 检查 GitHub Releases 页面
2. **测试下载**: 下载并测试安装包
3. **检查更新**: 验证自动更新功能
4. **监控反馈**: 关注用户反馈和问题报告

## 💡 提示

- 🕐 **最佳发布时间**: 工作日上午，便于及时处理问题
- 📢 **发布通知**: 重要版本可在社交媒体或社区发布公告
- 🔄 **回滚准备**: 保留上一版本的安装包以备回滚
- 📈 **数据监控**: 关注下载量和使用统计
